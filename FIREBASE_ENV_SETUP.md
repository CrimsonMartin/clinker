# Firebase Environment Configuration Setup

This guide explains how to configure Firebase using environment variables that are excluded from source control for security.

## Overview

The Firebase configuration is now managed through environment variables stored in a `.env` file. This approach:
- Keeps sensitive Firebase credentials out of source control
- Allows different configurations for development, staging, and production
- Automatically generates the Firebase configuration file during build

## Setup Instructions

### 1. Configure Environment Variables

Edit the `.env` file in the project root with your actual Firebase project credentials:

```bash
# Firebase Configuration
FIREBASE_API_KEY=your_actual_api_key_here
FIREBASE_AUTH_DOMAIN=your_project_id.firebaseapp.com
FIREBASE_PROJECT_ID=your_project_id_here
FIREBASE_STORAGE_BUCKET=your_project_id.appspot.com
FIREBASE_MESSAGING_SENDER_ID=your_sender_id_here
FIREBASE_APP_ID=your_app_id_here
```

**To get these values:**
1. Go to the [Firebase Console](https://console.firebase.google.com/)
2. Select your project
3. Go to Project Settings (gear icon)
4. Scroll down to "Your apps" section
5. Click on the web app icon (`</>`)
6. Copy the config values from the `firebaseConfig` object

### 2. Build the Configuration

The Firebase configuration file is automatically generated from your environment variables:

```bash
# Generate Firebase config from .env
npm run build:config

# Full build (includes config generation + TypeScript compilation)
npm run build

# Start development server (runs full build first)
npm run start
```

### 3. File Structure

```
project/
├── .env                           # Your environment variables (not in git)
├── build-config.js               # Script to generate Firebase config
├── firebase/
│   ├── firebase-config.js        # Generated file (not in git)
│   ├── auth.js                   # Your Firebase auth code
│   └── sync.js                   # Your Firebase sync code
└── ...
```

## Important Notes

### Security
- The `.env` file is excluded from Git (listed in `.gitignore`)
- The generated `firebase/firebase-config.js` is also excluded from Git
- Never commit these files to source control

### Generated File Warning
The `firebase/firebase-config.js` file contains this warning:
```javascript
// DO NOT EDIT THIS FILE DIRECTLY - Edit .env instead and run 'npm run build:config'
```

Always edit the `.env` file and regenerate the config, never edit the Firebase config file directly.

### Development Workflow
1. Update `.env` with your Firebase credentials
2. Run `npm run build:config` to generate the Firebase configuration
3. Run `npm run build` or `npm run start` to build and test your extension

### Team Setup
When sharing this project with team members:
1. Share the `.env.example` file (if created) with placeholder values
2. Each team member should create their own `.env` file
3. Each team member should use their own Firebase project for development

### Production Deployment
For production builds, ensure your CI/CD pipeline:
1. Has access to production environment variables
2. Runs `npm run build:config` before building
3. Never exposes the `.env` file in the build artifacts

## Troubleshooting

### Missing Environment Variables
If you see this error:
```
Missing required environment variables:
  - FIREBASE_API_KEY
  - FIREBASE_PROJECT_ID
```

Make sure all required variables are set in your `.env` file.

### Configuration Not Updating
If changes to `.env` don't seem to take effect:
1. Run `npm run build:config` manually
2. Check that `firebase/firebase-config.js` was updated
3. Restart your development server

### Firebase Not Initializing
If Firebase isn't working:
1. Verify your Firebase project settings
2. Check browser console for errors
3. Ensure your domain is authorized in Firebase console
